##Возможности

**Цель: позволить писать код сразу, и не менять его перед заливкой в систему.**

* компиляция scss на лету
* компиляция смарти
* прокси для глобальных файлов
* загрузка дампов данных с сайтов
* livereload

[видео](http://cp1.megagroup.ru/d/66480/d/2014-11-20_1640.swf)

***

Например, для компиляции файлов scss в системе глобальные файлы в них необходимо включать через фрагмент `g:`, при заливке в систему его приходится добавлять, а при выкачивании
файлов на диск, удалять. WENV позволяет писать сразу с `g:`.

Смарти: содержит такой же набор функций и модификаторов что и в СУ

Позволяет включать шаблоны друг в друга используя функцию смарти `include`. Можно включать файлы через `global` или через `db`.
Если файл включается через `global` он ищется сначала в папке глобальных шаблонов: `resources/templates`, если там его нет - ищет в той же папке что и текущий файл.
Если и там его нет - выводит сообщение о том что шаблон не найден.

Если какой-либо из файлов - картинка, скрипт или стиль не были найдены в пределах папки, в пределах глобальной папки `resources/static` то они ищутся на первом сервере.
Если находятся - выкачиваются и помещаются во временную папку для кэша, если нет - отдается 404 ошибка.

Можно загружать данные с других сайтов, например [http://192.168.0.187:3000/tmp/index.tpl?smarty=http://wenv.demojs0.oml.ru/?dump]()
загрузит данные со страницы [http://wenv.demojs0.oml.ru/?dump]().

В каждой папке можно создавать файл `smarty.json` - содержимым этого файла дополнять или переопределять данные смарти, например если файл содержит:

```json
{
	"shop2": {
  	"my": {
  		"a": 5
  	}
  }
}
```

то переменная `$shop2.my.a` шаблона будет хранить значение `5`

Поддерживает 5 значений для get-параметра mode: product, folder, cart, order, main - подставляет вместо {tpl.body} соотв. глоб. шаблон

***

##Установка

Для работы нужен git, node.js (лучше 32 разрядная версия) и php (php ожидается в папке `С:/PHP/`), если там файл не обнаруживается - проверяется PATH.
Устанавливаем это все, регистрируемся на битбакете, можно завести общий доступ на всех, идем в папку в которой планируем работать, открываем коммандную строку
запускаем комманду `git clone https://masalygin@bitbucket.org/masalygin/wenv.git`
после установки, заходим в папку `wenv` и запускаем `update.bat`
по завершению, запускаем файл `run.bat`
- на этом этапе рядом с папкой `wenv` создается папка `www` - куда и надо размещать проекты
структура может быть следующей

<pre>
www/
  Юн/
    123456/
      index.tpl
       images/
         css/
           main.scss
         js/
           main.js
</pre>